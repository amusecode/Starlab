# DO NOT EDIT THIS FILE as 'starlab_start.sh' -- generated by configure.

# Source this file from your .profile file to set up the following environment
# variables:
#
#	STARLAB_PATH	Root directory of the Starlab source distribution.
#			Used by many scripts in sbin, but nowhere else in
#			the Starlab make process or by any Starlab program.
#			Could easily be removed, as all the Starlab scripts
#			could be autoconfigured.  However, retain for
#			compatibility with older setup and other scripts.
#
#	STARLAB_INSTALL_PATH	Directory in which the Starlab bin, include,
#				info, lib, man, and share directories are
#				installed.  Necessary for running and
#				linking with the Starlab software, but
#				not used within Starlab itself.
#
#	STARLAB		A ~convenient synonym for STARLAB_PATH, again never
#			used within Starlab, but retained for compatibility.
#
#	STARLAB_VERSION	The current Starlab version number, derived from the
#			"definitive" version in autoconf.ac.  Not used by
#			Starlab, but retained for compatibility with older
#			scripts and other programs.
#
# STARLAB_PATH and STARLAB_INSTALL_PATH are then used to update the search path.
#
#---------------------------------------------------------------------

old_path=""
if [ "x$STARLAB_PATH" != "x" ]; then
    old_path=$STARLAB_PATH
fi

export STARLAB_PATH="@STARLAB_SOURCE_PATH@"
export STARLAB_INSTALL_PATH="@STARLAB_INSTALL_PATH@"
export STARLAB=$STARLAB_PATH

if [ "x$STARLAB_PATH" != "x$old_path" && "x$TERM" != "x" ]; then
    echo STARLAB_PATH changed to $STARLAB_PATH
fi
unset old_path

# Bash users are tough enough not to have a VERSION file created for
# them if none already exists...

if [ -e $STARLAB_PATH/VERSION ]; then
   export STARLAB_VERSION=`cat $STARLAB_PATH/VERSION`
fi

if [ "x$TERM" != "x" ]; then
    echo "Starlab version $STARLAB_VERSION loaded with"
    echo "        STARLAB_PATH         = $STARLAB_PATH"
    echo "        STARLAB_INSTALL_PATH = $STARLAB_INSTALL_PATH"
fi

#---------------------------------------------------------------------
#
# Remove any old Starlab from the search path,
# but leave "/sbin", "/usr/sbin", "/usr/local/sbin" intact.
# Add Starlab to search path after . and .. (or at end of path if absent).
#
# *** CHECK: what if we are user starlab and have a ~/bin directory??? ***

PATH=`echo "$PATH" | tr : '\12' | \
 awk '! /starlab.*bin$/ || /^(\/(|usr|local))+\/sbin$/ { p[++n] = $0; }
    /^\.+$/ { lastdot = n; }
    END {
            if(lastdot == 0) lastdot = n;
            p[lastdot] = p[lastdot] ":" spath1 ":" spath2 ;
            printf "%s", p[1];
            for(i=2; i<=n; i++) printf ":%s", p[i];
    }' spath1=$STARLAB_PATH/sbin spath2=$STARLAB_INSTALL_PATH/bin`
export PATH
